<!--
  This is for development purposes to ease debugging the CoffeeScript.
  You shouldn't interpret CoffeeScript on the fly in production for performance reasons.
-->

<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.js"></script>
  <script type="text/javascript" src="mathquill.js"></script>

  <script type="text/javascript" src="http://coffeescript.org/extras/coffee-script.js"></script>
  <script type="text/coffeescript" src="../equation_editor/events.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/view.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/collapsible_view.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/button_views.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/button_group_view.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/button_view_factory.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/button_group_view_factory.coffee"></script>
  <script type="text/coffeescript" src="../equation_editor/equation_editor_view.coffee"></script>

  <link rel="stylesheet" type="text/css" href="mathquill.css">
  <link rel="stylesheet" type="text/css" href="equation_editor.css">
</head>
<body class="equation-editor">
  <div class="cols">
    <div class="math-form col">
      <div class="button-bar"></div>

      <div class="math"></div>
    </div>
    <div class="button-groups col">
    </div>
  </div>
  <script type="text/javascript">
    setTimeout(function() {
      var params = top.tinymce.activeEditor.windowManager.getParams();
      var existingLatex = params['existing_latex'];

      var equationEditor = new EquationEditor.EquationEditorView({
        $el: $('.equation-editor'),
        existingLatex: existingLatex,
        restrictions: top.tinymce.equationEditorRestrictions
      }).render();

      params['latexInput'] = equationEditor.input();
      top.tinymce.activeEditor.windowManager.setParams(params);
    }, 1000);
  </script>
</body>
</html>
